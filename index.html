<!DOCTYPE html>
<html>
<head>
    <title>3D Building AR Project</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            font-family: Arial, sans-serif;
        }
        .instruction {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            text-align: center;
            color: white;
            background: rgba(0,0,0,0.8);
            padding: 20px;
            border-radius: 15px;
            z-index: 1000;
        }
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 24px;
            background: rgba(0,0,0,0.7);
            padding: 20px;
            border-radius: 10px;
        }
        .quality-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ -->
    <button class="quality-btn" onclick="toggleQuality()">–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ</button>
    
    <!-- AR —Å—Ü–µ–Ω–∞ —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ -->
    <a-scene 
        embedded 
        arjs=' 
            sourceType: webcam;
            detectionMode: mono_and_matrix;
            matrixCodeType: 3x3;
            maxDetectionRate: 60;
            cameraParametersUrl: https://raw.githubusercontent.com/AR-js-org/AR.js/master/data/data/camera_para.dat;
        '
        renderer="colorManagement: true; precision: high;"
        vr-mode-ui="enabled: false"
    >
        
        <!-- –£–ª—É—á—à–µ–Ω–Ω—ã–π –º–∞—Ä–∫–µ—Ä —Å –±–æ–ª—å—à–µ–π –∑–æ–Ω–æ–π —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è -->
        <a-marker 
            type="pattern" 
            preset="custom"
            url="https://raw.githubusercontent.com/AR-js-org/AR.js/master/data/data/patt.hiro"
            smooth="true"
            smoothCount="10"
            smoothTolerance="0.01"
            smoothThreshold="5"
        >
            <!-- 3D –º–æ–¥–µ–ª—å —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ -->
            <a-entity 
                gltf-model="url(https://cdn.jsdelivr.net/gh/Project3DBuilding/3DBuilding@main/building.glb)"
                scale="0.3 0.3 0.3"
                position="0 0.5 0"
                rotation="0 180 0"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 10000; easing: linear"
            >
            </a-entity>
        </a-marker>
        
        <!-- –ö–∞–º–µ—Ä–∞ —Å —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π -->
        <a-entity camera="fov: 60; far: 10000; near: 0.1;"></a-entity>
        
    </a-scene>
    
    <div class="instruction">
        <h3>üîç –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</h3>
        <p>1. –†–∞—Å–ø–µ—á–∞—Ç–∞–π—Ç–µ <a href="https://raw.githubusercontent.com/AR-js-org/AR.js/master/data/images/hiro.png" target="_blank" style="color: #4fc3f7;">–º–∞—Ä–∫–µ—Ä Hiro</a></p>
        <p>2. –•–æ—Ä–æ—à–µ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ üì∏</p>
        <p>3. –î–µ—Ä–∂–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω steady ü™Ñ</p>
        <p>4. –ù–∞–≤–µ–¥–∏—Ç–µ –Ω–∞ –º–∞—Ä–∫–µ—Ä —Å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è 30-50 —Å–º</p>
    </div>

    <script>
        let highQuality = false;
        
        function toggleQuality() {
            highQuality = !highQuality;
            const scene = document.querySelector('a-scene');
            const button = document.querySelector('.quality-btn');
            
            if (highQuality) {
                scene.renderer.setPixelRatio(2);
                scene.renderer.setPrecision('high');
                button.textContent = '–û–±—ã—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ';
                console.log('–í–∫–ª—é—á–µ–Ω–æ –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ');
            } else {
                scene.renderer.setPixelRatio(1);
                scene.renderer.setPrecision('medium');
                button.textContent = '–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ';
                console.log('–û–±—ã—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ');
            }
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
        document.querySelector('a-scene').addEventListener('loaded', function() {
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            if (isMobile) {
                document.querySelector('a-entity[camera]').setAttribute('camera', 'fov: 70; far: 5000;');
            }
        });
    </script>
</body>
</html>
